{"version":3,"sources":["actions_index.js"],"names":[],"mappings":"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","file":"actions_index-compiled.js","sourcesContent":["import axios from 'axios';\nimport { browserHistory } from 'react-router';\nimport {\n    AUTH_USER,\n    UNAUTH_USER,\n    AUTH_ERROR,\n    GET_USERS,\n    GET_POSTS,\n    ADD_POST,\n    UPDATE_POSTS,\n    CHECK_AUTH\n} from './actions_types';\n\n// const ROOT_URL = 'https://interreact.herokuapp.com';\nconst ROOT_URL = 'http://localhost:3000/';\n\n// https://interreact.herokuapp.com\nexport function signinUser({ email, password }) {\n    return function(dispatch) {\n        //submit email/pw to server\n        axios.post(`${ROOT_URL}/signin`, { email, password })\n            .then(response => {\n                //save jwt token\n                localStorage.setItem('token', response.data.token);\n                //update state to reflect authentication\n                dispatch({ type: AUTH_USER });\n                //redirect route\n                browserHistory.push('/');\n            })\n            .catch(() => {\n                //else show error to user\n                dispatch(authError('Invalid email or password'));\n            })\n\n    }\n}\n\nexport function signupUser({email, username, password}) {\n    return function(dispatch) {\n        axios.post(`${ROOT_URL}/signup`, {email, username, password})\n            .then(response => {\n                localStorage.setItem('token', response.data.token);\n                dispatch({ type: AUTH_USER });\n                browserHistory.push('/');\n            })\n            .catch(response => dispatch(authError('An account with that email already exists')))\n    }\n}\n\nexport function authError(error) {\n    return {\n        type: AUTH_ERROR,\n        payload: error\n    }\n}\n\nexport function signoutUser() {\n    localStorage.removeItem('token');\n    return function(dispatch) {\n        dispatch({ type: UNAUTH_USER });\n        browserHistory.push('/');\n    }\n}\n\n\nexport function checkAuth({email, password}) {\n    return (dispatch) => {\n        return dispatch(\n            signinUser({email, password})\n        ).then(() => {\n            return dispatch(\n                console.log(\"checked auth\")\n            )\n        })\n    }\n}\n\n\n\nexport function getUsers() {\n    const request = axios.get(`${ROOT_URL}/users`);\n    // console.log(request);\n    return {\n        type: GET_USERS,\n        payload: request\n    }\n}\n\nexport function getPosts() {\n    const request = axios.get(`${ROOT_URL}/posts`);\n    return {\n        type: GET_POSTS,\n        payload: request\n    }\n}\n\nexport function addPost({author, avatar, content}) {\n    const request = axios.post(`${ROOT_URL}/addpost`, {author, avatar, content});\n    // console.log(request);\n    return {\n        type: ADD_POST,\n        payload: request\n    }\n}\n\n\nexport function updateUsers({email, username, password}) {\n    return (dispatch) => {\n        return dispatch(\n            signupUser({email, username, password})\n        ).then(() => {\n            return dispatch(\n                getUsers()\n            )\n        })\n    }\n}\n\n\nexport function updatePosts({author, avatar, content}) {\n    return (dispatch) => {\n        return dispatch(\n            addPost({author, avatar, content})\n        ).then(() => {\n            return dispatch(\n                getPosts()\n            )\n        })\n    }\n}"]}